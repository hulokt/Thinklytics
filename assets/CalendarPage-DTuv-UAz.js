import{j as e,m as t,al as a,$ as r,Q as n,x as s,T as i,V as l,aQ as d,aR as o,d as c,w as m,a7 as p,a6 as x,A as u,J as g}from"./ui-libs-D_VrEDOQ.js";import{r as b}from"./react-vendor-Bmnvhqav.js";import{h as f,u as h,i as y,a as w,j as v,k,l as j}from"./index-DlcCiPi8.js";import"./supabase-BjlvUUcM.js";import"./pdf-utils-BVOYDPbl.js";import"./data-libs-DQyM0wFE.js";b.createContext(void 0);const N=({event:c,onStart:m,onDelete:p,compact:x=!1,className:u})=>{const[g,h]=b.useState(!1),y=(()=>{switch(c.status){case"completed":return{gradient:"from-emerald-500/10 to-green-500/5",border:"border-emerald-200 dark:border-emerald-800",icon:o,iconColor:"text-emerald-600 dark:text-emerald-400",iconBg:"bg-emerald-100 dark:bg-emerald-900/30",accent:"text-emerald-700 dark:text-emerald-400"};case"in-progress":return{gradient:"from-blue-500/10 to-cyan-500/5",border:"border-blue-200 dark:border-blue-800",icon:l,iconColor:"text-blue-600 dark:text-blue-400",iconBg:"bg-blue-100 dark:bg-blue-900/30",accent:"text-blue-700 dark:text-blue-400"};default:return{gradient:"from-purple-500/10 to-pink-500/5",border:"border-purple-200 dark:border-purple-800",icon:d,iconColor:"text-purple-600 dark:text-purple-400",iconBg:"bg-purple-100 dark:bg-purple-900/30",accent:"text-purple-700 dark:text-purple-400"}}})(),w=y.icon;return e.jsxs(t.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeOut"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:f("group relative overflow-hidden rounded-lg","bg-gradient-to-br",y.gradient,"border",y.border,"hover:shadow-lg","transition-all duration-200","backdrop-blur-sm",u),onClick:()=>"completed"!==c.status&&m?.(c),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 to-transparent dark:from-white/5 pointer-events-none"}),e.jsxs("div",{className:"relative p-2.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5 mb-2",children:[e.jsxs("div",{className:"flex items-start gap-1.5 flex-1 min-w-0",children:[e.jsx("div",{className:f("p-1.5 rounded-md shadow-sm",y.iconBg,"ring ring-white/40 dark:ring-gray-700/40"),children:e.jsx(w,{className:f("w-3.5 h-3.5",y.iconColor)})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0",children:[e.jsx("h3",{className:"font-semibold text-xs text-gray-900 dark:text-white mb-0.5 line-clamp-1",children:c.title||`Quiz ${c.quizNumber||""}`}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:f("text-[10px] font-semibold px-1.5 py-0.5 rounded-full",y.iconBg,y.accent),children:"completed"===c.status?"✓ Completed":"in-progress"===c.status?"⏵ In Progress":"○ Planned"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:["completed"!==c.status&&e.jsx(t.button,{whileHover:{scale:1.15},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),m?.(c)},className:f("p-1.5 rounded-md transition-all shadow-sm",y.iconBg,y.iconColor,"hover:shadow-md ring ring-white/40 dark:ring-gray-700/40"),title:"in-progress"===c.status?"Continue":"Start",children:e.jsx(a,{className:"w-3 h-3",fill:"currentColor"})}),e.jsx(t.button,{whileHover:{scale:1.15},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),p?.(c)},className:"p-1.5 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-all shadow-sm hover:shadow-md",title:"Delete",children:e.jsx(r,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-1.5 bg-white/60 dark:bg-gray-800/60 rounded-md backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50",children:[e.jsx(n,{className:"w-3.5 h-3.5 text-gray-600 dark:text-gray-400 mb-0.5"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:c.questions?.length||0}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium",children:"Questions"})]}),"completed"===c.status?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-1.5 bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 rounded-md backdrop-blur-sm border border-emerald-200/50 dark:border-emerald-800/50",children:[e.jsx(s,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400 mb-0.5"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-300",children:[(v=c.score,"number"==typeof v?Math.round(v):"--"),"%"]}),e.jsx("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 font-medium",children:"Score"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-1.5 bg-white/60 dark:bg-gray-800/60 rounded-md backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50",children:[e.jsx(i,{className:"w-3.5 h-3.5 text-gray-600 dark:text-gray-400 mb-0.5"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:c.correctAnswers||0}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium",children:"Correct"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-1.5 bg-white/60 dark:bg-gray-800/60 rounded-md backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50",children:[e.jsx(l,{className:"w-3.5 h-3.5 text-gray-600 dark:text-gray-400 mb-0.5"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(e=>{if(!e)return"--";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`})(c.timeSpent)}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium",children:"Time Spent"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-1.5 bg-white/60 dark:bg-gray-800/60 rounded-md backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 opacity-50",children:[e.jsx(s,{className:"w-3.5 h-3.5 text-gray-400 dark:text-gray-500 mb-0.5"}),e.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-gray-500",children:"--"}),e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:"Pending"})]})]})]})]}),e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none",animate:{x:g?["-200%","200%"]:"-200%"},transition:{duration:.5,ease:"easeInOut"}})]});var v},z=({onStartQuiz:n})=>{const[s,i]=b.useState(new Date),[d,o]=b.useState(!1),[f,z]=b.useState(!1),[_,S]=b.useState(""),[q,D]=b.useState("success"),[$,I]=b.useState(""),{isDarkMode:A}=h(),{data:C,upsertData:E}=y(),{quizManager:M,completedQuizzes:Q,inProgressQuizzes:P,allQuizzesLoading:T}=w(),[U,L]=b.useState(0),O=e=>{if("string"==typeof e)return e;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},F=(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})();b.useEffect(()=>{const e=(e=>{if(!C||!Array.isArray(C))return"";const t=C.find(t=>"notes"===t.type&&t.date===e);return t?t.content:""})(O(s));I(e)},[s,C]),b.useEffect(()=>{const e=e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&!e.target.isContentEditable){if((e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),setIsModalOpen(!0)),"ArrowLeft"===e.key){e.preventDefault();const t=new Date(s);t.setDate(t.getDate()-1),i(t)}else if("ArrowRight"===e.key){e.preventDefault();const t=new Date(s);t.setDate(t.getDate()+1),i(t)}else if("ArrowUp"===e.key){e.preventDefault();const t=new Date(s);t.setDate(t.getDate()-7),i(t)}else if("ArrowDown"===e.key){e.preventDefault();const t=new Date(s);t.setDate(t.getDate()+7),i(t)}"t"!==e.key&&"T"!==e.key||(e.preventDefault(),i(new Date))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s]);const B=e=>{const t=new Map,a=(e,a)=>{const r=e.quizId?`quiz-${e.quizId}`:`event-${e.id}`;(!t.has(r)||a>t.get(r).priority)&&t.set(r,{...e,priority:a})};if(Array.isArray(C)){C.filter(t=>t.date===e).forEach(e=>{a(e,1)})}if(P&&Array.isArray(P)){P.filter(t=>{const a=t.date||t.lastUpdated;if(!a)return!1;return O(new Date(a))===e}).forEach(t=>{const r={id:`inprogress-${t.id}`,title:`Quiz #${t.quizNumber||"Unknown"}`,date:e,type:"quiz",status:"in-progress",quizId:t.id,questions:t.questions||[],metadata:t};a(r,2)})}if(Q&&Array.isArray(Q)){Q.filter(t=>{const a=t.date||t.lastUpdated;if(!a)return!1;return O(new Date(a))===e}).forEach(t=>{const r={id:`completed-${t.id}`,title:`Quiz #${t.quizNumber||"Unknown"}`,date:e,type:"quiz",status:"completed",quizId:t.id,score:t.score,timeSpent:t.timeSpent,questions:t.questions||[],metadata:t};a(r,3)})}return Array.from(t.values()).sort((e,t)=>t.priority-e.priority).map(({priority:e,...t})=>t).filter(e=>"notes"!==e.type)},Y=B(O(s));b.useEffect(()=>{L(e=>e+1)},[C,P,Q]),b.useEffect(()=>{},[C,Q,P,s,Y]),b.useEffect(()=>{Array.isArray(C)&&(C.length,C.map(e=>({id:e.id,status:e.status,date:e.date})))},[C]);const H=async e=>{if(e){if("planned"===e.status){const t=(C||[]).map(t=>t.id===e.id?{...t,status:"in-progress"}:t);e.id,t.length,t.map(e=>({id:e.id,status:e.status,date:e.date})),Z(t)}n&&n(e)}},J=async e=>{try{const t=String(e.id||"");if(t.startsWith("completed-")||t.startsWith("inprogress-")){if(!M||!e.quizId)throw new Error("QuizManager or quizId not available for QuizManager event");if(!(await M.deleteQuiz(e.quizId)))throw new Error("Failed to delete from QuizManager");const t=(C||[]).filter(t=>t.quizId!==e.quizId);t.length!==(C||[]).length&&await Z(t),S("Quiz deleted successfully")}else if("custom"===e.type){const t=(C||[]).filter(t=>t.id!==e.id);await Z(t),S("Event deleted successfully")}else{M&&e.quizId&&await M.deleteQuiz(e.quizId);const t=(C||[]).filter(t=>t.id!==e.id);await Z(t),S("Quiz deleted successfully")}D("success"),z(!0),setTimeout(()=>z(!1),3e3)}catch(t){S(`Failed to delete: ${t.message}`),D("error"),z(!0),setTimeout(()=>z(!1),5e3)}},{addUndoAction:R}=v(),W=e=>{if(e.metadata&&"number"==typeof e.metadata.quizNumber)return e.metadata.quizNumber;if("number"==typeof e.quizNumber)return e.quizNumber;const t="string"==typeof e.title?e.title.match(/#(\d+)/):null;return t?parseInt(t[1],10):0},K={quizzes:Y.filter(e=>"quiz"===e.type||"planned"===e.type).sort((e,t)=>W(e)-W(t)),custom:Y.filter(e=>"custom"===e.type)},X=t=>{if("quiz"===t.type||"planned"===t.type)switch(t.status){case"completed":return e.jsx(g,{className:"w-4 h-4 text-green-500"});case"in-progress":return e.jsx(l,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(a,{className:"w-4 h-4 text-blue-500"})}return e.jsx(p,{className:"w-4 h-4 text-purple-500"})},V=e=>{if("quiz"===e.type||"planned"===e.type)switch(e.status){case"completed":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800";case"in-progress":return"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800";default:return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800"}return"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800"},G=e=>{if("quiz"===e.type||"planned"===e.type)switch(e.status){case"completed":return"Completed";case"in-progress":return"In Progress";default:return"Planned"}return"Custom Event"};b.useEffect(()=>{if(!C||!M||T)return;C.length;const e=Array.isArray(C)?C:[],t=M.getAllQuizzes()||[],a=e.map(e=>{if(("planned"===e.type||"quiz"===e.type)&&!e.quizId){const a=t.find(t=>t.id==e.id||t.metadata&&t.metadata.calendarEventId===e.id);if(a)return{...e,quizId:a.id}}return e}),r=new Set(t.map(e=>"string"==typeof e.id?parseInt(e.id,10):e.id)),n=a.filter(e=>"custom"===e.type||"notes"===e.type||("planned"===e.status||"in-progress"===e.status||"planned"===e.type||("completed"===e.status?!!e.quizId:!!("quiz"!==e.type&&"planned"!==e.type||e.quizId))));if(n.length!==e.length){e.filter(e=>!n.find(t=>t.id===e.id)).map(e=>({id:e.id,status:e.status,date:e.date,type:e.type,quizId:e.quizId,title:e.title})),t.map(e=>({id:e.id,status:e.status,date:e.date})),Array.from(r)}JSON.stringify(n)!==JSON.stringify(C)&&(C.length,n.length,n.map(e=>({id:e.id,status:e.status,date:e.date})),Z(n))},[C,M,T]);const Z=async e=>{await E(e)};return e.jsxs("div",{className:"h-full overflow-hidden flex flex-col transition-colors duration-300 relative",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 "+(A?"bg-gradient-to-br from-blue-950/20 via-indigo-950/10 to-purple-950/20":"bg-gradient-to-br from-blue-100/60 via-indigo-100/40 to-purple-100/60")}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse "+(A?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20":"bg-gradient-to-r from-blue-500/15 to-cyan-500/15")}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 "+(A?"bg-gradient-to-r from-indigo-500/20 to-purple-500/20":"bg-gradient-to-r from-indigo-500/15 to-purple-500/15")}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-64 h-64 rounded-full blur-3xl animate-pulse delay-500 "+(A?"bg-gradient-to-r from-purple-500/15 to-pink-500/15":"bg-gradient-to-r from-purple-500/12 to-pink-500/12")}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-48 h-48 rounded-full blur-3xl animate-pulse delay-1500 "+(A?"bg-gradient-to-r from-cyan-500/15 to-blue-500/15":"bg-gradient-to-r from-cyan-500/12 to-blue-500/12")}),e.jsx("div",{className:`absolute top-20 left-10 w-32 h-32 border-2 rounded-2xl rotate-12 animate-float ${A?"border-blue-400/30 bg-transparent":"border-blue-400/25 bg-white/10"} backdrop-blur-sm`}),e.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 rounded-full animate-float-delayed "+(A?"bg-gradient-to-br from-blue-500/20 to-indigo-500/20":"bg-gradient-to-br from-blue-500/15 to-indigo-500/15")}),e.jsx("div",{className:`absolute bottom-32 left-20 w-20 h-20 border-2 rounded-lg rotate-45 animate-float-slow ${A?"border-purple-400/30 bg-transparent":"border-purple-400/25 bg-white/10"} backdrop-blur-sm`}),e.jsx("div",{className:"absolute top-1/3 left-16 w-24 h-32 rounded-tl-3xl rounded-br-3xl animate-float delay-800 "+(A?"bg-gradient-to-r from-blue-400/20 to-cyan-400/20":"bg-gradient-to-r from-blue-400/15 to-cyan-400/15")}),e.jsx("div",{className:"absolute bottom-1/3 right-16 w-32 h-24 rounded-tr-3xl rounded-bl-3xl animate-float-delayed "+(A?"bg-gradient-to-r from-purple-400/20 to-indigo-400/20":"bg-gradient-to-r from-purple-400/15 to-indigo-400/15")}),e.jsx("div",{className:"absolute top-1/3 right-1/6 w-8 h-8 transform rotate-45 animate-float delay-900 "+(A?"bg-amber-400/25":"bg-amber-400/20"),style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),e.jsx("div",{className:"absolute bottom-2/5 left-1/8 w-6 h-6 transform -rotate-15 animate-float-slow delay-1100 "+(A?"bg-lime-400/25":"bg-lime-400/20"),style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-8 h-8 transform rotate-45 animate-float delay-1000 "+(A?"bg-cyan-400/20":"bg-cyan-400/15"),style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-12 h-12 transform -rotate-30 animate-float-delayed "+(A?"bg-rose-400/20":"bg-rose-400/15"),style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),e.jsx("div",{className:"absolute top-1/5 right-1/4 w-2 h-2 rounded-full animate-ping delay-500 "+(A?"bg-white/60":"bg-blue-300/70")}),e.jsx("div",{className:"absolute bottom-1/5 left-1/4 w-1 h-1 rounded-full animate-ping delay-1200 "+(A?"bg-yellow-300/80":"bg-yellow-300/70")}),e.jsx("div",{className:"absolute top-2/5 left-3/4 w-1.5 h-1.5 rounded-full animate-ping delay-800 "+(A?"bg-cyan-300/70":"bg-cyan-300/60")}),e.jsx("div",{className:"absolute bottom-2/5 right-3/4 w-2.5 h-2.5 rounded-full animate-ping delay-1800 "+(A?"bg-pink-300/60":"bg-pink-300/50")}),e.jsx("div",{className:"absolute inset-0",children:[...Array(15)].map((t,a)=>{const r=100*Math.random(),n=100*Math.random(),s=3*Math.random(),i=2+2*Math.random(),l=3*Math.random()+1;return e.jsx("div",{className:"absolute rounded-full animate-ping "+(A?"bg-blue-500/40":"bg-blue-500/30"),style:{left:`${r}%`,top:`${n}%`,width:`${l}px`,height:`${l}px`,animationDelay:`${s}s`,animationDuration:`${i}s`}},`particle-${a}`)})}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03] dark:opacity-[0.05]",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, #3b82f6 1px, transparent 1px), \n                             radial-gradient(circle at 75% 75%, #6366f1 1px, transparent 1px)",backgroundSize:"60px 60px",backgroundPosition:"0 0, 30px 30px"}})}),e.jsx("div",{className:"absolute top-1/4 left-0 w-32 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent transform rotate-45 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-1/3 right-0 w-40 h-px bg-gradient-to-r from-transparent via-purple-400/30 to-transparent transform -rotate-45 animate-pulse delay-2000"}),e.jsx("div",{className:"absolute top-2/3 left-0 w-24 h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent transform rotate-12 animate-pulse delay-500"}),e.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-2 border-t-2 rounded-tl-3xl "+(A?"border-blue-400/20":"border-blue-400/15")}),e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 border-r-2 border-t-2 rounded-tr-3xl "+(A?"border-purple-400/20":"border-purple-400/15")}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 border-l-2 border-b-2 rounded-bl-3xl "+(A?"border-cyan-400/20":"border-cyan-400/15")}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-2 border-b-2 rounded-br-3xl "+(A?"border-indigo-400/20":"border-indigo-400/15")})]}),e.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 px-3 sm:px-6 py-4 flex-shrink-0 relative overflow-hidden shadow-lg transition-colors duration-300 z-10",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-[#22adff] to-[#3ab6ff] rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Calendar & Schedule"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm mt-1 transition-colors duration-300",children:"Manage your study sessions and track your progress"})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Planned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Custom"})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden relative z-10",children:e.jsxs("div",{className:"h-full flex flex-col lg:flex-row pb-20 sm:pb-6 overflow-y-auto calendar-main-content",children:[e.jsx("div",{className:"lg:w-2/3 p-3 sm:p-6 flex flex-col relative z-10",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-3 sm:p-6 flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-2",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[e.jsx(c,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:"Calendar"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-y-auto",children:e.jsx(k,{onChange:e=>{i(e)},value:s,tileClassName:({date:e,view:t})=>{if("month"!==t)return"";const a=O(e),r=s?O(s):null;let n="";return r&&a===r?n+="react-calendar__tile--active":a===F&&(n+="react-calendar__tile--now"),n},tileContent:({date:t,view:a})=>{if("month"!==a)return null;const r=O(t),n=B(r);if(0===n.length)return null;const s={completed:0,"in-progress":0,planned:0,custom:0};n.forEach(e=>{"custom"===e.type?s.custom++:"completed"===e.status?s.completed++:"in-progress"===e.status?s["in-progress"]++:s.planned++});const i=[];for(let e=0;e<s.completed;e++)i.push({status:"completed",key:`completed-${e}`});for(let e=0;e<s["in-progress"];e++)i.push({status:"in-progress",key:`in-progress-${e}`});for(let e=0;e<s.planned;e++)i.push({status:"planned",key:`planned-${e}`});for(let e=0;e<s.custom;e++)i.push({status:"custom",key:`custom-${e}`});const l=i.slice(0,8);return e.jsxs("div",{className:"activity-dots-container",children:[l.map(t=>e.jsx("div",{className:`activity-dot ${t.status}`,title:`${t.status.charAt(0).toUpperCase()+t.status.slice(1)} activity`},t.key)),i.length>8&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",title:i.length-8+" more activities",children:["+",i.length-8]})]})},className:"modern-calendar"},U)})]})}),e.jsx("div",{className:"lg:w-1/3 p-3 sm:p-6 flex flex-col relative z-10",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-3 sm:p-6 flex-1 overflow-hidden flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6 flex-shrink-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[e.jsx(m,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{children:"Activities"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Y.length," events"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-600/50 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-600 flex-shrink-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Daily Notes"})]})}),e.jsx("div",{className:"h-[8rem] sm:h-[16rem] border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:e.jsx(j,{value:$,onChange:e=>{I(e),clearTimeout(window.notesSaveTimeout),window.notesSaveTimeout=setTimeout(()=>{(async(e,t)=>{try{const a=C||[],r=a.findIndex(t=>"notes"===t.type&&t.date===e);let n;if(r>=0)n=[...a],n[r]={...n[r],content:t,lastUpdated:(new Date).toISOString()};else{const r={id:Date.now(),type:"notes",date:e,content:t,title:"Daily Notes",status:"notes",createdAt:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};n=[...a,r]}await Z(n)}catch(a){S("Failed to save notes"),D("error"),z(!0),setTimeout(()=>z(!1),5e3)}})(O(s),e)},1e3)},placeholder:"Start typing..."})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[Y.length>0&&e.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 flex-shrink-0",children:[K.quizzes.length>0&&e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mt-4",children:["Quizzes (",K.quizzes.length,")"]}),K.custom.length>0&&e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:["Custom Events (",K.custom.length,")"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 pr-2",children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:0===Y.length?e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8 sm:py-12",children:[e.jsx(t.div,{animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(p,{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-500"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"No activities yet"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Start planning your study sessions"}),e.jsxs(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>setIsModalOpen(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 mx-auto",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{children:"Schedule a Quiz"})]})]}):e.jsxs(e.Fragment,{children:[K.quizzes.length>0&&e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 gap-3 sm:gap-4",children:e.jsx(u,{mode:"popLayout",children:K.quizzes.map((t,a)=>e.jsx(N,{event:t,onStart:H,onDelete:J},`${t.id}-${t.status}-${a}`))})})}),K.custom.length>0&&e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"space-y-3",children:K.custom.map((t,a)=>e.jsx("div",{className:"group relative bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-700 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[X(t),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:t.title}),e.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${V(t)}`,children:G(t)})})]})]}),e.jsx("button",{onClick:()=>J(t),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200",title:"Delete",children:e.jsx(r,{className:"w-4 h-4"})})]})},`${t.id}-${a}`))})})]})})})]})]})]})})]})}),f&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 "+("success"===q?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:["success"===q?e.jsx(g,{className:"w-5 h-5"}):e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"font-medium",children:_})]})}),e.jsx("style",{children:"\n  .react-calendar {\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 16px;\n    font-family: 'Inter', system-ui, sans-serif;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n    overflow: hidden;\n  }\n\n  @media (max-width: 640px) {\n    .react-calendar {\n      min-height: 400px;\n      border-radius: 12px;\n    }\n    \n    .react-calendar__tile {\n      min-height: 50px;\n      padding: 12px 8px;\n      font-size: 14px;\n    }\n    \n    .react-calendar__navigation {\n      padding: 12px;\n    }\n    \n    .react-calendar__month-view__weekdays {\n      padding: 8px 0;\n      font-size: 12px;\n    }\n  }\n\n  .dark .react-calendar {\n    background: #1f2937;\n    border-color: #374151;\n    color: #f9fafb;\n  }\n\n  .react-calendar__navigation {\n    background: linear-gradient(135deg, #22adff 0%, #3ab6ff 100%);\n    padding: 16px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .react-calendar__navigation button {\n    background: none;\n    border: none;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    padding: 10px 14px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .react-calendar__navigation button:hover {\n    background: rgba(255, 255, 255, 0.15) !important;\n    transform: translateY(-1px);\n  }\n\n  .dark .react-calendar__navigation button:hover {\n    background: rgba(255, 255, 255, 0.15) !important;\n    transform: translateY(-1px);\n  }\n\n  .react-calendar__navigation button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .react-calendar__month-view__weekdays {\n    background: #f8fafc;\n    padding: 12px 0;\n    font-weight: 600;\n    font-size: 14px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    color: #64748b;\n  }\n\n  .dark .react-calendar__month-view__weekdays {\n    background: #374151;\n    color: #9ca3af;\n  }\n\n  .react-calendar__month-view__weekdays__weekday {\n    padding: 12px;\n    text-align: center;\n  }\n\n  .react-calendar__month-view__days {\n    padding: 12px;\n    flex: 1;\n  }\n\n  .react-calendar__tile {\n    background: none;\n    border: none;\n    padding: 16px 12px;\n    border-radius: 12px;\n    cursor: pointer;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    position: relative;\n    font-weight: 500;\n    color: #374151;\n    font-size: 16px;\n    min-height: 70px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    border: 2px solid transparent;\n  }\n\n  .dark .react-calendar__tile {\n    color: #f9fafb;\n  }\n\n  .react-calendar__tile:hover {\n    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n    transform: translateY(-2px) scale(1.05);\n    border-color: #cbd5e1;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  }\n\n  .dark .react-calendar__tile:hover {\n    background: linear-gradient(135deg, #374151 0%, #4b5563 100%);\n    border-color: #4b5563;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  }\n\n  .react-calendar__tile:disabled {\n    color: #cbd5e1;\n    cursor: not-allowed;\n    background: none;\n  }\n\n  .dark .react-calendar__tile:disabled {\n    color: #6b7280;\n  }\n\n  .react-calendar__tile--now {\n    background: linear-gradient(135deg, #22adff, #3ab6ff);\n    color: white;\n    font-weight: 600;\n  }\n\n  .react-calendar__tile--now:hover {\n    background: linear-gradient(135deg, #1e9be8, #32a5e6) !important;\n    color: white !important;\n    transform: translateY(-1px);\n  }\n\n  .dark .react-calendar__tile--now {\n    background: linear-gradient(135deg, #22adff, #3ab6ff);\n    color: white;\n  }\n\n  .dark .react-calendar__tile--now:hover {\n    background: linear-gradient(135deg, #1e9be8, #32a5e6) !important;\n    color: white !important;\n    transform: translateY(-1px);\n  }\n\n  .react-calendar__tile--active {\n    background: linear-gradient(135deg, rgba(34, 173, 255, 0.15), rgba(58, 182, 255, 0.25)) !important;\n    color: #22adff !important;\n    font-weight: 700;\n    border-color: #22adff !important;\n    box-shadow: 0 8px 16px rgba(34, 173, 255, 0.25), inset 0 1px 2px rgba(255, 255, 255, 0.5);\n    transform: scale(1.08);\n  }\n\n  .dark .react-calendar__tile--active {\n    background: linear-gradient(135deg, rgba(34, 173, 255, 0.25), rgba(58, 182, 255, 0.35)) !important;\n    color: #3ab6ff !important;\n    border-color: #3ab6ff !important;\n    box-shadow: 0 8px 16px rgba(34, 173, 255, 0.35);\n  }\n\n  .react-calendar__tile--hasEvents {\n    position: relative;\n  }\n\n  .react-calendar__tile--hasEvents::after {\n    content: '';\n    position: absolute;\n    bottom: 8px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 6px;\n    height: 6px;\n    background: #10b981;\n    border-radius: 50%;\n  }\n\n  .dark .react-calendar__tile--hasEvents::after {\n    background: #34d399;\n  }\n\n  /* Activity dots styles */\n  .activity-dots-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2px;\n    margin-top: 4px;\n    flex-wrap: wrap;\n    max-width: 100%;\n  }\n\n  .activity-dot {\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    flex-shrink: 0;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n    animation: pulse-dot 2s ease-in-out infinite;\n  }\n\n  @keyframes pulse-dot {\n    0%, 100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.7;\n    }\n  }\n\n  .activity-dot:hover {\n    transform: scale(1.4);\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);\n    animation: none;\n  }\n\n  .activity-dot.completed {\n    background: linear-gradient(135deg, #10b981, #059669);\n    box-shadow: 0 1px 3px rgba(16, 185, 129, 0.3);\n  }\n\n  .activity-dot.in-progress {\n    background: linear-gradient(135deg, #f59e0b, #d97706);\n    box-shadow: 0 1px 3px rgba(245, 158, 11, 0.3);\n  }\n\n  .activity-dot.planned {\n    background: linear-gradient(135deg, #3b82f6, #2563eb);\n    box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);\n  }\n\n  .activity-dot.custom {\n    background: linear-gradient(135deg, #8b5cf6, #7c3aed);\n    box-shadow: 0 1px 3px rgba(139, 92, 246, 0.3);\n  }\n\n  /* Dark mode adjustments for dots */\n  .dark .activity-dot.completed {\n    background: linear-gradient(135deg, #34d399, #10b981);\n    box-shadow: 0 1px 3px rgba(52, 211, 153, 0.4);\n  }\n\n  .dark .activity-dot.in-progress {\n    background: linear-gradient(135deg, #fbbf24, #f59e0b);\n    box-shadow: 0 1px 3px rgba(251, 191, 36, 0.4);\n  }\n\n  .dark .activity-dot.planned {\n    background: linear-gradient(135deg, #60a5fa, #3b82f6);\n    box-shadow: 0 1px 3px rgba(96, 165, 250, 0.4);\n  }\n\n  .dark .activity-dot.custom {\n    background: linear-gradient(135deg, #a78bfa, #8b5cf6);\n    box-shadow: 0 1px 3px rgba(167, 139, 250, 0.4);\n  }\n"}),e.jsx("style",{children:"\n        @media (min-width: 1018px) {\n          .calendar-main-content {\n            overflow-y: auto !important;\n          }\n        }\n      "})]})};export{z as default};
